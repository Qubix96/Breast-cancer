library("DBI")
library("ROracle")
drv <- dbDriver("Oracle")
##Joining basicli indyviduals information
con <- dbConnect(drv, username = "BreastCancer", password = "mundial009", dbname = "XEPDB1")
select <- dbSendQuery(con,
"select
d.icgc_donor_id,
d.donor_sex,
d.donor_vital_status,
d.donor_age_at_diagnosis,
d.donor_tumour_stage_at_diagnosis,
e.alcohol_history,
e.tabacco_smoking_history_indicator,
f.donor_has_relative_with_cancer_history,
f.relationship_type,
f.relationship_type_other,
f.relationship_sex,
f.relationship_age,
f.relationship_disease
from donor d
inner join
donor_exposure e
on e.icgc_donor_id = d.icgc_donor_id
inner join
donor_family f
on f.icgc_donor_id = d.icgc_donor_id;")
select <- dbSendQuery(con,
"select
d.icgc_donor_id,
d.donor_sex,
d.donor_vital_status,
d.donor_age_at_diagnosis,
d.donor_tumour_stage_at_diagnosis,
e.alcohol_history,
e.tabacco_smoking_history_indicator,
f.donor_has_relative_with_cancer_history,
f.relationship_type,
f.relationship_type_other,
f.relationship_sex,
f.relationship_age,
f.relationship_disease
from donor d
inner join
donor_exposure e
on e.icgc_donor_id = d.icgc_donor_id
inner join
donor_family f
on f.icgc_donor_id = d.icgc_donor_id")
summary <- dbFetch(select)
View(summary)
View(summary)
summmary <- distinct(summary)
library('tidiverse')
library('tidiverse')
library(tidyverse)
summmary <- distinct(summary)
summary(summary2)
summary <- dbFetch(select)
summar2 <- distinct(summary)
summary(summary2)
summary2 <- distinct(summary)
summary(summary2)
as.number(summary2) <- distinct(summary)
as.integer(summary2) <- distinct(summary)
as.numeric(summary2) <- distinct(summary)
as.numeric(summary) <- dbFetch(select)
summary <- dbFetch(select)
summary2 <- distinct(summary)
summary(as.numeric(summary2))
summary(summary2)
summarise(summary2)
summarise(summary2)
library("DBI")
library("ROracle")
drv <- dbDriver("Oracle")
con <- dbConnect(drv, username = "BreastCancer", password = "mundial009", dbname = "XEPDB1")
```{r}
library(tidyverse)
select <- dbSendQuery(con,
"select
d.icgc_donor_id,
d.donor_sex,
d.donor_vital_status,
d.donor_age_at_diagnosis,
d.donor_tumour_stage_at_diagnosis,
e.alcohol_history,
e.tabacco_smoking_history_indicator,
f.donor_has_relative_with_cancer_history,
f.relationship_type,
f.relationship_type_other,
f.relationship_sex,
f.relationship_age,
f.relationship_disease
from donor d
inner join
donor_exposure e
on e.icgc_donor_id = d.icgc_donor_id
inner join
donor_family f
on f.icgc_donor_id = d.icgc_donor_id")
summary <- dbFetch(select)
summary2 <- distinct(summary)
View(summary2)
summary(summary2)
summary <- as.factor(summary)
summary2 <- distinct(summary)
select <- dbSendQuery(con,
"select
d.icgc_donor_id,
d.donor_sex,
d.donor_vital_status,
d.donor_age_at_diagnosis,
d.donor_tumour_stage_at_diagnosis,
e.alcohol_history,
e.tabacco_smoking_history_indicator,
f.donor_has_relative_with_cancer_history,
f.relationship_type,
f.relationship_type_other,
f.relationship_sex,
f.relationship_age,
f.relationship_disease
from donor d
inner join
donor_exposure e
on e.icgc_donor_id = d.icgc_donor_id
inner join
donor_family f
on f.icgc_donor_id = d.icgc_donor_id")
summary <- dbFetch(select)
summary2 <- distinct(summary)
summary2 <- as.factor(summary2)
summary(summary2)
summary(summary2)
select <- dbSendQuery(con,
as.factor("select
d.icgc_donor_id,
d.donor_sex,
d.donor_vital_status,
d.donor_age_at_diagnosis,
d.donor_tumour_stage_at_diagnosis,
e.alcohol_history,
e.tabacco_smoking_history_indicator,
f.donor_has_relative_with_cancer_history,
f.relationship_type,
f.relationship_type_other,
f.relationship_sex,
f.relationship_age,
f.relationship_disease
from donor d
inner join
donor_exposure e
on e.icgc_donor_id = d.icgc_donor_id
inner join
donor_family f
on f.icgc_donor_id = d.icgc_donor_id"))
summary <- dbFetch(select)
select <- dbSendQuery(con,
"select
d.icgc_donor_id,
d.donor_sex,
d.donor_vital_status,
d.donor_age_at_diagnosis,
d.donor_tumour_stage_at_diagnosis,
e.alcohol_history,
e.tabacco_smoking_history_indicator,
f.donor_has_relative_with_cancer_history,
f.relationship_type,
f.relationship_type_other,
f.relationship_sex,
f.relationship_age,
f.relationship_disease
from donor d
inner join
donor_exposure e
on e.icgc_donor_id = d.icgc_donor_id
inner join
donor_family f
on f.icgc_donor_id = d.icgc_donor_id")
summary <- dbFetch(select)
View(summary)
summary <- summary %>%
mutate(ICGC_DONOR_ID = aS.factor(ICGC_DONOR_ID)) %>%
mutate(DONOR_SEX = as.factor(DONOR_SEX)) %>%
mutate(DONOR_VITAL_STATUS = as.factor(DONOR_VITAL_STATUS)) %>%
mutate(DONOR_AGE_AT_DIAGNOSIS = as.integer(DONOR_AGE_AT_DIAGNOSIS)) %>%
mutate(DONOR_TUMOUR_STAGE_AT_DIAGNOSIS = as.factor(DONOR_TUMOUR_STAGE_AT_DIAGNOSIS)) %>%
mutate(ALCOHOL_HISTORY = as.factor(ALCOHOL_HISTORY)) %>%
mutate(TABACCO_SMOKING_HISTORY_INDICATOR = as.factor(TABACCO_SMOKING_HISTORY_INDICATOR)) %>%
mutate(DONOR_HAS_RELATIVE_WITH_CANCER_HISTORY = as.factor(DONOR_HAS_RELATIVE_WITH_CANCER_HISTORY)) %>%
mutate(RELATIONSHIP_TYPE = as.factor(RELATIONSHIP_TYPE)) %>%
mutate(RELATIONSHIP_TYPE_OTHER = as.factor(RELATIONSHIP_TYPE_OTHER)) %>%
mutate(RELATIONSHIP_SEX = as.factor(RELATIONSHIP_SEX)) %>%
mutate(RELATIONSHIP_AGE = as.integer(RELATIONSHIP_AGE)) %>%
mutate(RELATIONSHIP_DISEASE = as.factor(RELATIONSHIP_DISEASE))
library(tidyverse)
summary <- summary %>%
mutate(ICGC_DONOR_ID = aS.factor(ICGC_DONOR_ID)) %>%
mutate(DONOR_SEX = as.factor(DONOR_SEX)) %>%
mutate(DONOR_VITAL_STATUS = as.factor(DONOR_VITAL_STATUS)) %>%
mutate(DONOR_AGE_AT_DIAGNOSIS = as.integer(DONOR_AGE_AT_DIAGNOSIS)) %>%
mutate(DONOR_TUMOUR_STAGE_AT_DIAGNOSIS = as.factor(DONOR_TUMOUR_STAGE_AT_DIAGNOSIS)) %>%
mutate(ALCOHOL_HISTORY = as.factor(ALCOHOL_HISTORY)) %>%
mutate(TABACCO_SMOKING_HISTORY_INDICATOR = as.factor(TABACCO_SMOKING_HISTORY_INDICATOR)) %>%
mutate(DONOR_HAS_RELATIVE_WITH_CANCER_HISTORY = as.factor(DONOR_HAS_RELATIVE_WITH_CANCER_HISTORY)) %>%
mutate(RELATIONSHIP_TYPE = as.factor(RELATIONSHIP_TYPE)) %>%
mutate(RELATIONSHIP_TYPE_OTHER = as.factor(RELATIONSHIP_TYPE_OTHER)) %>%
mutate(RELATIONSHIP_SEX = as.factor(RELATIONSHIP_SEX)) %>%
mutate(RELATIONSHIP_AGE = as.integer(RELATIONSHIP_AGE)) %>%
mutate(RELATIONSHIP_DISEASE = as.factor(RELATIONSHIP_DISEASE))
library(tidyverse)
summary <- summary %>%
mutate(ICGC_DONOR_ID = aS.factor(ICGC_DONOR_ID)) %>%
mutate(DONOR_SEX = as.factor(DONOR_SEX)) %>%
mutate(DONOR_VITAL_STATUS = as.factor(DONOR_VITAL_STATUS)) %>%
mutate(DONOR_AGE_AT_DIAGNOSIS = as.integer(DONOR_AGE_AT_DIAGNOSIS)) %>%
mutate(DONOR_TUMOUR_STAGE_AT_DIAGNOSIS = as.factor(DONOR_TUMOUR_STAGE_AT_DIAGNOSIS)) %>%
mutate(ALCOHOL_HISTORY = as.factor(ALCOHOL_HISTORY)) %>%
mutate(TABACCO_SMOKING_HISTORY_INDICATOR = as.factor(TABACCO_SMOKING_HISTORY_INDICATOR)) %>%
mutate(DONOR_HAS_RELATIVE_WITH_CANCER_HISTORY = as.factor(DONOR_HAS_RELATIVE_WITH_CANCER_HISTORY)) %>%
mutate(RELATIONSHIP_TYPE = as.factor(RELATIONSHIP_TYPE)) %>%
mutate(RELATIONSHIP_TYPE_OTHER = as.factor(RELATIONSHIP_TYPE_OTHER)) %>%
mutate(RELATIONSHIP_SEX = as.factor(RELATIONSHIP_SEX)) %>%
mutate(RELATIONSHIP_AGE = as.integer(RELATIONSHIP_AGE)) %>%
mutate(RELATIONSHIP_DISEASE = as.factor(RELATIONSHIP_DISEASE))
pz3 <- p %>%
select(ICGC_DONOR_ID, DONOR_VITAL_STATUS, DISEASE_STATUS_LAST_FOLLOWUP, DONOR_AGE_AT_DIAGNOSIS,) %>%
mutate(ICGC_DONOR_ID = as.factor(ICGC_DONOR_ID)) %>%
mutate(DONOR_VITAL_STATUS = as.factor(DONOR_VITAL_STATUS)) %>%
mutate(DISEASE_STATUS_LAST_FOLLOWUP = as.factor(DISEASE_STATUS_LAST_FOLLOWUP)) %>%
mutate(DONOR_AGE_AT_DIAGNOSIS = as.integer(DONOR_AGE_AT_DIAGNOSIS)) %>%
filter(!is.na(DONOR_VITAL_STATUS)) %>%
filter(DONOR_VITAL_STATUS == "deceased" & is.na(DISEASE_STATUS_LAST_FOLLOWUP) | DONOR_VITAL_STATUS == "alive" & !is.na(DISEASE_STATUS_LAST_FOLLOWUP)) %>%
group_by(ICGC_DONOR_ID)
library("DBI")
library("ROracle")
drv <- dbDriver("Oracle")
con <- dbConnect(drv, username = "BreastCancer", password = "mundial009", dbname = "XEPDB1")
select <- dbSendQuery(con,
"select
d.icgc_donor_id,
d.donor_sex,
d.donor_vital_status,
d.donor_age_at_diagnosis,
d.donor_tumour_stage_at_diagnosis,
e.alcohol_history,
e.tabacco_smoking_history_indicator,
f.donor_has_relative_with_cancer_history,
f.relationship_type,
f.relationship_type_other,
f.relationship_sex,
f.relationship_age,
f.relationship_disease
from donor d
inner join
donor_exposure e
on e.icgc_donor_id = d.icgc_donor_id
inner join
donor_family f
on f.icgc_donor_id = d.icgc_donor_id")
summary <- dbFetch(select)
library(tidyverse)
summary <- summary %>%
mutate(ICGC_DONOR_ID = aS.factor(ICGC_DONOR_ID)) %>%
mutate(DONOR_SEX = as.factor(DONOR_SEX)) %>%
mutate(DONOR_VITAL_STATUS = as.factor(DONOR_VITAL_STATUS)) %>%
mutate(DONOR_AGE_AT_DIAGNOSIS = as.integer(DONOR_AGE_AT_DIAGNOSIS)) %>%
mutate(DONOR_TUMOUR_STAGE_AT_DIAGNOSIS = as.factor(DONOR_TUMOUR_STAGE_AT_DIAGNOSIS)) %>%
mutate(ALCOHOL_HISTORY = as.factor(ALCOHOL_HISTORY)) %>%
mutate(TABACCO_SMOKING_HISTORY_INDICATOR = as.factor(TABACCO_SMOKING_HISTORY_INDICATOR)) %>%
mutate(DONOR_HAS_RELATIVE_WITH_CANCER_HISTORY = as.factor(DONOR_HAS_RELATIVE_WITH_CANCER_HISTORY)) %>%
mutate(RELATIONSHIP_TYPE = as.factor(RELATIONSHIP_TYPE)) %>%
mutate(RELATIONSHIP_TYPE_OTHER = as.factor(RELATIONSHIP_TYPE_OTHER)) %>%
mutate(RELATIONSHIP_SEX = as.factor(RELATIONSHIP_SEX)) %>%
mutate(RELATIONSHIP_AGE = as.integer(RELATIONSHIP_AGE)) %>%
mutate(RELATIONSHIP_DISEASE = as.factor(RELATIONSHIP_DISEASE))
summary <- summary %>%
mutate(ICGC_DONOR_ID = aS.factor(ICGC_DONOR_ID)) %>%
mutate(DONOR_SEX = factor(DONOR_SEX)) %>%
mutate(DONOR_VITAL_STATUS = as.factor(DONOR_VITAL_STATUS)) %>%
mutate(DONOR_AGE_AT_DIAGNOSIS = as.integer(DONOR_AGE_AT_DIAGNOSIS)) %>%
mutate(DONOR_TUMOUR_STAGE_AT_DIAGNOSIS = as.factor(DONOR_TUMOUR_STAGE_AT_DIAGNOSIS)) %>%
mutate(ALCOHOL_HISTORY = as.factor(ALCOHOL_HISTORY)) %>%
mutate(TABACCO_SMOKING_HISTORY_INDICATOR = as.factor(TABACCO_SMOKING_HISTORY_INDICATOR)) %>%
mutate(DONOR_HAS_RELATIVE_WITH_CANCER_HISTORY = as.factor(DONOR_HAS_RELATIVE_WITH_CANCER_HISTORY)) %>%
mutate(RELATIONSHIP_TYPE = as.factor(RELATIONSHIP_TYPE)) %>%
mutate(RELATIONSHIP_TYPE_OTHER = as.factor(RELATIONSHIP_TYPE_OTHER)) %>%
mutate(RELATIONSHIP_SEX = as.factor(RELATIONSHIP_SEX)) %>%
mutate(RELATIONSHIP_AGE = as.integer(RELATIONSHIP_AGE)) %>%
mutate(RELATIONSHIP_DISEASE = as.factor(RELATIONSHIP_DISEASE))
summary <- summary %>%
mutate(ICGC_DONOR_ID = factor(ICGC_DONOR_ID)) %>%
mutate(DONOR_SEX = as.factor(DONOR_SEX)) %>%
mutate(DONOR_VITAL_STATUS = as.factor(DONOR_VITAL_STATUS)) %>%
mutate(DONOR_AGE_AT_DIAGNOSIS = as.integer(DONOR_AGE_AT_DIAGNOSIS)) %>%
mutate(DONOR_TUMOUR_STAGE_AT_DIAGNOSIS = as.factor(DONOR_TUMOUR_STAGE_AT_DIAGNOSIS)) %>%
mutate(ALCOHOL_HISTORY = as.factor(ALCOHOL_HISTORY)) %>%
mutate(TABACCO_SMOKING_HISTORY_INDICATOR = as.factor(TABACCO_SMOKING_HISTORY_INDICATOR)) %>%
mutate(DONOR_HAS_RELATIVE_WITH_CANCER_HISTORY = as.factor(DONOR_HAS_RELATIVE_WITH_CANCER_HISTORY)) %>%
mutate(RELATIONSHIP_TYPE = as.factor(RELATIONSHIP_TYPE)) %>%
mutate(RELATIONSHIP_TYPE_OTHER = as.factor(RELATIONSHIP_TYPE_OTHER)) %>%
mutate(RELATIONSHIP_SEX = as.factor(RELATIONSHIP_SEX)) %>%
mutate(RELATIONSHIP_AGE = as.integer(RELATIONSHIP_AGE)) %>%
mutate(RELATIONSHIP_DISEASE = as.factor(RELATIONSHIP_DISEASE))
summary2 <- distinct(summary)
summary(summary2)
